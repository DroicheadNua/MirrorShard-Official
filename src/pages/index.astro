---
import Layout from '../layouts/Layout.astro';

// ベースURLの取得（末尾のスラッシュ調整）
const baseUrl = import.meta.env.BASE_URL.replace(/\/$/, '');
---

<Layout title="MirrorShard 2 - Immersive Writing Editor">

    <!-- ヘッダー -->
    <header>
        <div class="container nav-wrapper">
            <a href={baseUrl} class="logo" style="font-family: 'Orbitron';">MirrorShard 2 Official Site</a>
            <nav>
                <a href={import.meta.env.BASE_URL.replace(/\/$/, '') + "/About"}>About</a>
                <div id=headerfeature>
                    <button id="feature_pulldown">Features</button>
                    <div id="feature_menu" class="hidden">
                        <a href={import.meta.env.BASE_URL.replace(/\/$/, '') + "/immersive"} class="feature_item">没入感と縦書き</a>
                        <a href={import.meta.env.BASE_URL.replace(/\/$/, '') + "/AI"} class="feature_item">多彩なAI機能</a>
                        <a href={import.meta.env.BASE_URL.replace(/\/$/, '') + "/Customize"} class="feature_item">自由な画面デザイン</a>
                        <a href={import.meta.env.BASE_URL.replace(/\/$/, '') + "/Markdown"} class="feature_item">マークダウン・HTML編集</a>
                    </div>
                </div>
                <a href="https://github.com/DroicheadNua/MirrorShard_2/releases/latest">Download</a>
                <a href={`${baseUrl}/docs/`}>Docs</a>
                <a href={`${baseUrl}/Blog/`}>Blog</a>
            </nav>
        </div>
    </header>

    <main>
        <!-- ヒーローセクション -->
        <section class="hero">
            <div class="container">
                <h1>MirrorShard 2</h1>
                <p style="text-align: center">統合型ライティングエディタの進化形。<br>AIと共に、物語を紡ごう。</p>

                <div class="hero-image">
                    <img src={`${baseUrl}/img/ScreenShot01.jpg`} alt="MirrorShard 2 Screenshot" />
                </div>

                <div class="cta-buttons">
                    <a href="https://github.com/DroicheadNua/MirrorShard_2/releases/latest" class="btn primary">DOWNLOAD v1.2.0</a>
                    <a href="https://github.com/DroicheadNua/MirrorShard_2" class="btn secondary">GITHUB</a>
                </div>
            </div>
        </section>

        <!-- 機能紹介（カード） -->
        <section class="container" id="featurescontainer">
            <p style="font-size: 1.8em;text-align: center;font-weight: bolder;font-family: Orbitron;-webkit-text-stroke: 1px green;">Features</p>
            <div class="features">
                <a href={import.meta.env.BASE_URL.replace(/\/$/, '') + "/immersive"} class="main-card">
                    <h3>Immersive Writing</h3>
                    <p>ミニマルなUIとBGM・タイプ音で、没入感の高い執筆体験を実現。</P>
                    <p>ルビ対応の縦書きプレビューも搭載、日本語での執筆活動を強力に支援します。</p>
                    <img src={`${baseUrl}/img/ScreenShot01.jpg`} alt="sc01" />
                </a>
                <a href={import.meta.env.BASE_URL.replace(/\/$/, '') + "/AI"} class="main-card">
                    <h3>AI Assistant</h3>
                    <p>AIチャットウィンドウに加え、メインエディタにもAI機能を搭載。</p>
                    <p>文章の続きを書かせたり、選択範囲をリライトさせたりと、多彩なサポートで執筆を支えます。</p>
                    <img src={`${baseUrl}/img/ScreenShot03.jpg`} alt="sc03" />
                </a>
            </div>
            <div class="features">
                <a href={import.meta.env.BASE_URL.replace(/\/$/, '') + "/Customize"} class="main-card">
                    <h3>Highly Customizable</h3>
                    <p>画面の配色や背景画像を自由にカスタマイズ可能。</p>
                    <img src={`${baseUrl}/img/ScreenShot02.jpg`} alt="sc02" />
                </a>
                <a href={import.meta.env.BASE_URL.replace(/\/$/, '') + "/Markdown"} class="main-card">
                    <h3>Markdown/HTML Edit</h3>
                    <p>マークダウン/HTMLプレビューウィンドウを搭載、マークダウン・HTMLエディタとしても運用可能。</p>
                    <p>このサイトもMirrorShard 2で作成されています。</p>
                    <img src={`${baseUrl}/img/ScreenShot04.jpg`} alt="sc03" />
                </a>
            </div>
        </section>

    </main>

    <!-- フッター -->
    <footer>
        <div class="container">
            <p>&copy; 2025-2026 DroicheadNua. Released under the MIT License.</p>
        </div>
    </footer>
</Layout>

<style>
    /* ページ固有のスタイル */
    html, body{
        background: #050505;
    }

    .hero {
        text-align: center;
        padding-bottom: 40px;
        border-bottom: 1px solid #55555555; 
    }

    .hero h1 {
        font-family: 'Orbitron';
        -webkit-text-stroke: 2px green;
        font-size: 4.5rem;
        margin-bottom: 1rem;
        letter-spacing: 2px;
        text-shadow: 0 0 20px rgba(0, 255, 65, 0.3);
    }

    .hero-image img {
        width: 100%;
        max-width: 900px;
        border: 1px solid #333;
        border-radius: 8px;
        box-shadow: 0 0 30px rgba(0, 0, 0, 0.5);
        margin: 40px 0;
    }

    .btn {
        display: inline-block;
        padding: 12px 30px;
        border-radius: 4px;
        font-weight: bold;
        margin: 0 10px;
        font-family: sans-serif;
    }

    .btn.primary {
        background: transparent;
        border: 1px solid var(--accent-color);
        color: var(--accent-color);
        box-shadow: 0 0 10px rgba(0, 255, 65, 0.2);
    }

    .btn.primary:hover {
        background: var(--accent-color);
        color: #000;
        box-shadow: 0 0 20px var(--accent-color);
    }

    .btn.secondary {
        border: 1px solid #555;
        color: #aaa;
    }
    .btn.secondary:hover {
        border-color: #fff;
        color: #fff;
    }
    .main-card {
        text-decoration: none; /* アンダーラインを消す */
        color: inherit;       /* 親（body等）の文字色を継承する */
        display: block;       /* カード全体をクリッカブルにするため */
        background: #00050044;
        padding: 20px;
        border-radius: 8px;
        border: 1px solid #050;
        box-shadow: 0 0 10px rgba(0, 200, 0, 0.5);
        transition: transform 0.2s, box-shadow 0.2s;
    }
    .main-card:hover {
        transform: translateY(-5px);
        box-shadow: 0px 0px 30px rgba(0, 255, 65, 0.8);
        border-color: var(--secondary-color);
        background: #00220044;
    }
    .main-card h3 {
        color: var(--accent-color);
        font-family: 'Orbitron';
        margin-top: 0;
        text-align: center;
    }
    .main-card img {
        width: 100%;
        max-width: 640px;
        border: 1px solid #333;
        border-radius: 8px;
        box-shadow: 0 0 30px rgba(0, 0, 0, 0.5);
        margin: 0;
    }
    p {
        color: #eee;
        text-align: start;
        font-family: "M PLUS 1p";
    }

    footer {
        padding: 40px 0;
        text-align: center;
        border-top: 1px solid #333;
        font-size: 0.9rem;
        color: #666;
    }
</style>
<script>
    const featurepulldown = document.querySelector('header #feature_pulldown')!;
    const featuremenu = document.querySelector('header #feature_menu')!;
    featurepulldown.addEventListener('click', (e) => {
        e.stopPropagation();
        featuremenu.classList.toggle('hidden');
    });

    // ウィンドウのどこかをクリックしたら、メニューを閉じる (UX向上のため)
    window.addEventListener('click', () => {
        if (!featuremenu.classList.contains('hidden')) {
            featuremenu.classList.add('hidden');
        }
    });
</script>